<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>He书签</title>
<link rel="icon" type="image/x-icon" href="./https://gitee.com/yhe3/yi/raw/master/w/he.ico"><br/>  <link rel="apple-touch-icon" href="https://gitee.com/yhe3/yi/raw/master/w/he.ico">
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#165DFF',
                        dark: '#165DFF',
                        light: '#F2F3F5',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .bookmark-card {
                @apply bg-white/80 backdrop-blur-md rounded-lg p-3 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-gray-200/50 h-full;
            }
            .search-input {
                @apply w-full py-3 px-4 rounded-full bg-white/80 backdrop-blur-md border border-gray-200/50 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300 placeholder:text-gray-500 text-dark pr-12;
            }
            .search-highlight {
                @apply bg-yellow-100 text-primary font-medium rounded px-0.5;
            }
        }
    </style>
</head>
<body class="font-inter min-h-screen flex flex-col items-center justify-start p-4 md:p-8 bg-gradient-to-br from-light to-gray-200 overflow-x-hidden">
    <!-- 页面容器 -->
    <div class="w-full max-w-7xl z-10">
        <!-- 仅保留搜索框，移除排序按钮 -->
        <div class="max-w-2xl mx-auto relative">
            <input 
                type="text" 
                id="searchInput" 
                class="search-input" 
                placeholder="搜索书签（名称/描述）"
                autocomplete="off"
            >
            <!-- 清空按钮 -->
            <button id="clearSearch" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200 hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <!-- 搜索结果统计 -->
            <div id="searchCount" class="absolute left-4 bottom-1 text-xs text-gray-500 hidden">找到 <span id="resultCount">0</span> 个结果</div>
        </div>

        <!-- 书签容器：响应式六列布局 -->
        <div id="bookmarkContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mt-6">
        </div>

        <!-- 空状态提示 -->
        <div id="emptyState" class="hidden text-center py-16 text-gray-700">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>
            <h3 class="text-xl font-medium">未找到匹配的书签</h3>
            <p class="mt-2">请尝试其他关键词或添加新书签</p>
            <button id="resetSearch" class="mt-4 px-4 py-2 bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors duration-300 text-sm">
                清空搜索
            </button>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="mt-auto py-6 text-center text-gray-600 w-full z-10">
        <p>超级书签 &copy; 2019 | 11/29体验</p>
    </footer>

    <script>
        // 书签数据
        const bookmarks = [
                        { name: "音乐多qhe", url: "https://109guo.github.io/9guo/qhe.html", color: "primary", desc: "109guo" },
            { name: "书名txt", url: "https://h-9e.github.io/Book/txt.html", color: "dark", desc: "电脑本地文件txt格式" },
           { name: "PC文件字搜索", url: "https://yi109he.github.io/1/", color: "dark", desc: "电脑本地文件夹里面文件文本搜索" },
           { name: "文字模板", url: "https://109guo.github.io/8guo/md.html", color: "dark", desc: "参考文献模板" },
           { name: "书名epub", url: "https://h-9e.github.io/Book/epub.html", color: "dark", desc: "电脑本地文件epub格式" },
           { name: "书名PDF", url: "https://h-9e.github.io/Book/pdf.html", color: "dark", desc: "电脑本地文件pdf格式" },
           { name: "书名azw3", url: "https://h-9e.github.io/Book/azw3.html", color: "dark", desc: "电脑本地文件3格式" },
            { name: "数据分享he", url: "https://h-9e.github.io/he/he.html", color: "pink-500", desc: "h-9e年轻" },
         { name: "音乐单首", url: "https://h-9e.github.io/music/geci.html", color: "pink-500", desc: "音乐歌词000" },
            { name: "故事汇", url: "https://109guo.github.io/9guo/tgs.html", color: "blue-500", desc: "109guo听故事更新中tgs" },
            { name: "怡❤️H", url: "http://qyih.ysepan.com/", color: "blue-400", desc: "私人定制网盘" },
            { name: "音乐ihe", url: "https://109guo.github.io/9guo/ihe.html", color: "blue-500", desc: "109guo社区" },
            { name: "guo还没有制作全", url: "https://109guo.github.io/9guo/guo.html", color: "blue-400", desc: "109guo商务" },
               { name: "懿 官网", url: "http://wei1.ysepan.com/", color: "blue-500", desc: "私人定制网盘" },
            { name: "book听言", url: "https://109guo.github.io/8guo/du.html", color: "blue-400", desc: "收集i言论" },
             { name: "book听启", url: "https://109guo.github.io/8guo/q.html", color: "blue-500", desc: "感语录" },
            { name: "文件数据库", url: "https://109guo.github.io/8guo/xz.html", color: "blue-400", desc: "在线文件 下载" },
             { name: "book听", url: "https://109guo.github.io/h/i.html", color: "blue-500", desc: "超级阅读模式" },
            { name: "A图", url: "https://109guo.github.io/9guo/tu.html", color: "blue-400", desc: "图画展览馆" },
             { name: "Book格mobi式", url: "https://109guo.github.io/h/bookmobi.html", color: "blue-500", desc: "找书名mobi类" },
            { name: "book阅读主页", url: "https://109guo.github.io/9guo/Search.html", color: "blue-400", desc: "在线看书多格式" },
             { name: "音乐生日曲", url: "https://h-9e.github.io/music/Happy.html", color: "blue-500", desc: "生日快乐网站" },
            { name: "准备日记", url: "https://109guo.github.io/9guo/Yi.html", color: "blue-400", desc: "写日记模板码农" },
         { name: "音樂试试听", url: "https://h-9e.github.io/music/gec.html", color: "blue-400", desc: "歌词00时间类" },
            { name: "book", url: "https://109guo.github.io/9guo/book.html", color: "red-500", desc: "109guo分享" }     
        ];

        // 初始化页面
        document.addEventListener('DOMContentLoaded', () => {
            // 初始化自动按名称正序排序并渲染（无手动按钮，静默执行）
            const sortedBookmarks = sortBookmarksByName(bookmarks, 'asc');
            renderBookmarks(sortedBookmarks);

            // 搜索相关事件监听
            const searchInput = document.getElementById('searchInput');
            const clearSearchBtn = document.getElementById('clearSearch');
            const resetSearchBtn = document.getElementById('resetSearch');

            // 输入防抖搜索
            searchInput.addEventListener('input', debounce(searchBookmarks, 300));

            // 回车搜索
            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    searchBookmarks();
                    searchInput.blur();
                }
            });

            // 清空搜索按钮
            clearSearchBtn.addEventListener('click', () => {
                searchInput.value = '';
                searchBookmarks();
                clearSearchBtn.classList.add('hidden');
                document.getElementById('searchCount').classList.add('hidden');
            });

            // 空状态重置搜索
            resetSearchBtn.addEventListener('click', () => {
                searchInput.value = '';
                searchBookmarks();
                searchInput.focus();
            });

            // 监听搜索框值变化显示/隐藏清空按钮
            searchInput.addEventListener('input', () => {
                if (searchInput.value.trim()) {
                    clearSearchBtn.classList.remove('hidden');
                    document.getElementById('searchCount').classList.remove('hidden');
                } else {
                    clearSearchBtn.classList.add('hidden');
                    document.getElementById('searchCount').classList.add('hidden');
                }
            });

            // 键盘导航支持
            document.addEventListener('keydown', (e) => {
                // Ctrl/K 聚焦搜索框
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    searchInput.focus();
                    searchInput.select();
                }
            });
        });

        // 核心功能：按书签名称排序（支持中文拼音排序、英文字母排序，静默执行）
        function sortBookmarksByName(bookmarkList, order = 'asc') {
            // 复制原数组，避免修改原始数据
            const sortedList = [...bookmarkList];
            
            sortedList.sort((a, b) => {
                // 获取书签名称，统一转为字符串
                const nameA = a.name || '';
                const nameB = b.name || '';

                // 利用 localeCompare 实现中文拼音排序（兼容英文）
                const compareResult = nameA.localeCompare(nameB, 'zh-CN', { 
                    sensitivity: 'accent',
                    caseFirst: 'upper'
                });

                // 正序（asc）返回原始比较结果，倒序（desc）返回反向结果
                return order === 'asc' ? compareResult : -compareResult;
            });

            return sortedList;
        }

        // 防抖函数
        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        // 高亮搜索关键词
        function highlightKeyword(text, keyword) {
            if (!keyword || !text) return text;

            const regex = new RegExp(`(${keyword})`, 'gi');
            return text.replace(regex, '<span class="search-highlight">$1</span>');
        }

        // 渲染书签列表（适配六列布局）
        function renderBookmarks(bookmarkList) {
            const container = document.getElementById('bookmarkContainer');
            const emptyState = document.getElementById('emptyState');
            const resultCount = document.getElementById('resultCount');
            const searchCount = document.getElementById('searchCount');

            // 清空容器
            container.innerHTML = '';

            if (bookmarkList.length === 0) {
                container.classList.add('hidden');
                emptyState.classList.remove('hidden');
                searchCount.classList.add('hidden');
                return;
            }

            container.classList.remove('hidden');
            emptyState.classList.add('hidden');

            // 更新搜索结果计数
            resultCount.textContent = bookmarkList.length;
            if (document.getElementById('searchInput').value.trim()) {
                searchCount.classList.remove('hidden');
            }

            // 生成六列布局的书签卡片
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();

            bookmarkList.forEach(bookmark => {
                const card = document.createElement('a');
                card.href = bookmark.url;
                card.target = '_blank';
                card.className = 'bookmark-card group flex flex-col justify-center';

                // 高亮匹配的关键词
                const highlightedName = highlightKeyword(bookmark.name, searchTerm);
                const highlightedDesc = highlightKeyword(bookmark.desc, searchTerm);

                card.innerHTML = `
                    <div class="flex-1">
                        <h3 class="font-semibold text-base text-dark group-hover:text-${bookmark.color} transition-colors duration-300">${highlightedName}</h3>
                        <p class="text-gray-600 text-xs line-clamp-1">${highlightedDesc}</p>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // 搜索书签（搜索后自动静默按名称排序，无手动操作）
        function searchBookmarks() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.trim().toLowerCase();

            // 清空搜索时，自动按名称正序渲染全部书签
            if (!searchTerm) {
                const sortedBookmarks = sortBookmarksByName(bookmarks, 'asc');
                renderBookmarks(sortedBookmarks);
                document.getElementById('clearSearch').classList.add('hidden');
                document.getElementById('searchCount').classList.add('hidden');
                return;
            }

            // 1. 筛选匹配的书签（支持名称、描述、URL多字段匹配）
            const filteredBookmarks = bookmarks.filter(bookmark => 
                bookmark.name.toLowerCase().includes(searchTerm) || 
                bookmark.desc.toLowerCase().includes(searchTerm) ||
                bookmark.url.toLowerCase().includes(searchTerm)
            );

            // 2. 筛选后自动静默按名称正序排序（无需手动点击按钮）
            const sortedFilteredBookmarks = sortBookmarksByName(filteredBookmarks, 'asc');
            renderBookmarks(sortedFilteredBookmarks);

            // 显示清空按钮和结果计数
            document.getElementById('clearSearch').classList.remove('hidden');
            document.getElementById('searchCount').classList.remove('hidden');

            // 搜索后滚动到书签区域
            document.getElementById('bookmarkContainer').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>

